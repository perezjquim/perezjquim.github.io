sap.ui.define(["./util/BaseController"],function(t){"use strict";return t.extend("com.perezjquim.showcase.controller.Home",{API_BASE_URL:"https://perezjquim-ytc.herokuapp.com",onPressDownload:function(){this.setBusy(true);const t=this.getModel("prompt");const e=t.getData();const o=new URLSearchParams(e);const s=decodeURIComponent(o.toString());const n=(new Date).getTime();const i=`${this.API_BASE_URL}/crop-video?${s}&=${n}`;fetch(i).then(t=>{if(t.ok){const e=t.headers.get("content-disposition").split("filename=")[1].split(";")[0];t.blob().then(t=>{const o=new Blob([t],{type:"application/octet-stream"});this.setBusy(false);if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(o,e)}else{const t=window.URL.createObjectURL(o);const s=document.createElement("a");s.setAttribute("href",t);s.setAttribute("download",e);s.click()}})}else{throw new Error("Response NOK")}}).catch(t=>{this.setBusy(false);this.toast(`Error! - ${t}`)})}})});